import os
import logging

def lambda_handler(event, context):
    logging.info("=== Installed libraries in /opt ===")

    for root, dirs, files in os.walk("/opt"):
        for file in files:
            full_path = os.path.join(root, file)
            if full_path.endswith(".py") or 'site-packages' in full_path:
                logging.info(full_path)

    return {
        "status": "done",
        "message": "Check CloudWatch logs for installed libraries in /opt (i.e. from the Layer)"
    }
