try:
    with get_openai_callback() as cb:
        result = client.invoke([
            HumanMessage(content=final_prompt),
            HumanMessage(content="Generate the DataWeave script.")
        ])
        final_response = result.content.strip()
        final_response += "\n\n--- Token Usage ---"
        final_response += f"\nTotal Tokens: {cb.total_tokens}"
        final_response += f"\nPrompt Tokens: {cb.prompt_tokens}"
        final_response += f"\nCompletion Tokens: {cb.completion_tokens}"
        final_response += f"\nTotal Cost (USD): ${format(cb.total_cost, '.6f')}"
        print(final_response)
except Exception as e:
