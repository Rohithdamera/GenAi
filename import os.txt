import openai
 
# Set your OpenAI API key and other configurations

openai.api_type = "azure"



openai.api_version = "2024-08-01-preview"
 
# Define the API endpoint

api_url = "https://anypoint.mulesoft.com/mocking/api/v1/sources/exchange/assets/68ef9520-24e9-4cf2-b2f5-620025690913/training-american-flights-api/2.0.5/m/flights?destination=SFO"
 
# Define the prompt for OpenAI

prompt = (

    "Here is an API call to the flights endpoint. "

    "Please access that URL and generate test payloads based on the data returned from the API. "

)
 
def get_openai_client(api_url):

    try:

        response = openai.ChatCompletion.create(

            deployment_id="Fourth_Chatbot",

            messages=[

                {"role": "system", "content": prompt},

                {"role": "user", "content": api_url}

            ],

            max_tokens=1000,

            temperature=0.5

        )

        test_payloads = response['choices'][0]['message']['content']

        print("Test Payloads:\n", test_payloads)

    except Exception as e:

        print(f"Error during generating the test payloads: {e}")
 
# Call the function with the API URL

get_openai_client(api_url)

 
client_id: 12345, client_secret: 12345
 
