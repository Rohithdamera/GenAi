ARNING! azure_openai_api_key is not default parameter.
                    azure_openai_api_key was transferred to model_kwargs.
                    Please confirm that azure_openai_api_key is what you intended.
---------------------------------------------------------------------------
OpenAIError                               Traceback (most recent call last)
Cell In[40], line 145
    143 if __name__ == "__main__":
    144     print("=== MCP Agent Ready ===")
--> 145     agent = build_agent()
    146     cid = create_session()
    147     print(f"Session ID: {cid}")

Cell In[40], line 129, in build_agent()
    127 def build_agent():
    128     tools = get_tools()
--> 129     llm = get_openai_client()
    130     return initialize_agent(
    131         tools=tools,
    132         llm=llm,
   (...)    137         agent_kwargs={"prefix": CUSTOM_PROMPT}
    138     )

Cell In[40], line 44, in get_openai_client()
     43 def get_openai_client():
---> 44     return AzureChatOpenAI(
     45         azure_deployment="Fourth_Chatbot",
     46         azure_endpoint="https://testopenaiassets.openai.azure.com",
     47         openai_api_version="2024-08-01-preview",
     48         azure_openai_api_key="",  # ‚Üê Add your key
     49         temperature=0.3,
     50         max_tokens=2000,
     51     )

File ~\AppData\Roaming\Python\Python311\site-packages\langchain_core\_api\deprecation.py:222, in deprecated.<locals>.deprecate.<locals>.finalize.<locals>.warn_if_direct_instance(self, *args, **kwargs)
    220     warned = True
    221     emit_warning()
--> 222 return wrapped(self, *args, **kwargs)

File ~\AppData\Roaming\Python\Python311\site-packages\langchain_core\_api\deprecation.py:222, in deprecated.<locals>.deprecate.<locals>.finalize.<locals>.warn_if_direct_instance(self, *args, **kwargs)
    220     warned = True
    221     emit_warning()
--> 222 return wrapped(self, *args, **kwargs)

File ~\AppData\Roaming\Python\Python311\site-packages\langchain_core\load\serializable.py:130, in Serializable.__init__(self, *args, **kwargs)
    128 def __init__(self, *args: Any, **kwargs: Any) -> None:
    129     """"""  # noqa: D419
--> 130     super().__init__(*args, **kwargs)

    [... skipping hidden 1 frame]

File ~\AppData\Roaming\Python\Python311\site-packages\pydantic\_internal\_decorators_v1.py:148, in make_v1_generic_root_validator.<locals>._wrapper1(values, _)
    147 def _wrapper1(values: RootValidatorValues, _: core_schema.ValidationInfo) -> RootValidatorValues:
--> 148     return validator(values)

File ~\AppData\Roaming\Python\Python311\site-packages\langchain_core\utils\pydantic.py:168, in pre_init.<locals>.wrapper(cls, values)
    165             values[name] = field_info.default
    167 # Call the decorated function
--> 168 return func(cls, values)

File ~\AppData\Roaming\Python\Python311\site-packages\langchain_community\chat_models\azure_openai.py:219, in AzureChatOpenAI.validate_environment(cls, values)
    200         values["deployment_name"] = None
    201 client_params = {
    202     "api_version": values["openai_api_version"],
    203     "azure_endpoint": values["azure_endpoint"],
   (...)    217     "http_client": values["http_client"],
    218 }
--> 219 values["client"] = openai.AzureOpenAI(**client_params).chat.completions
    221 azure_ad_async_token_provider = values["azure_ad_async_token_provider"]
    223 if azure_ad_async_token_provider:

File ~\AppData\Roaming\Python\Python311\site-packages\openai\lib\azure.py:199, in AzureOpenAI.__init__(self, api_version, azure_endpoint, azure_deployment, api_key, azure_ad_token, azure_ad_token_provider, organization, project, webhook_secret, websocket_base_url, base_url, timeout, max_retries, default_headers, default_query, http_client, _strict_response_validation)
    196     azure_ad_token = os.environ.get("AZURE_OPENAI_AD_TOKEN")
    198 if api_key is None and azure_ad_token is None and azure_ad_token_provider is None:
--> 199     raise OpenAIError(
    200         "Missing credentials. Please pass one of `api_key`, `azure_ad_token`, `azure_ad_token_provider`, or the `AZURE_OPENAI_API_KEY` or `AZURE_OPENAI_AD_TOKEN` environment variables."
    201     )
    203 if api_version is None:
    204     api_version = os.environ.get("OPENAI_API_VERSION")

OpenAIError: Missing credentials. Please pass one of `api_key`, `azure_ad_token`, `azure_ad_token_provider`, or the `AZURE_OPENAI_API_KEY` or `AZURE_OPENAI_AD_TOKEN` environment variables.
