template="""
Analyze the following Java source code and return JSON with strictly these keys:
- class_name
- class_type (must be exactly one of: "Controller", "Service", "Repository", "Config", "Entity", "DTO", "Main")
- package_path
- methods: list of all public method names
- uses_repository: true/false (true if this class has a field or constructor parameter ending with 'Repository')

If class_type == "Entity", also include:
  "entity_fields": list of objects like { "name": fieldName, "type": fieldType }

⚠️ Important:
- Do NOT invent new class_type values. Only pick from the allowed list above.
- Do NOT output explanations. Only valid compact JSON.

Java Source:
{source}
"""
